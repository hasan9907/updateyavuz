<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ana Sayfa - Finans Yönetim Sistemi</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
  <link rel="stylesheet" href="../assets/styles.css">
  <style>
    .module-card {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      margin-bottom: 20px;
      height: 100%;
    }
    .module-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
      cursor: pointer;
    }
    .module-card .card-body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }
    .module-card .icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }
    .module-card .card-title {
      font-size: 1.5rem;
      font-weight: bold;
    }
    .module-card .card-text {
      text-align: center;
    }
    .dashboard-link {
      text-decoration: none;
      color: inherit;
    }
  </style>
</head>
<body>
  <div class="container-fluid">
    <div class="row">
      <!-- Sidebar -->
      <div class="col-md-2 sidebar">
        <h4 class="text-center mb-4">Finans Yönetim</h4>
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link active" href="index.html">
              <i class="bi bi-speedometer2"></i> Ana Sayfa
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="dashboard.html">
              <i class="bi bi-speedometer2"></i> Gösterge Paneli
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="customers.html">
              <i class="bi bi-people"></i> Müşteriler
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="products.html">
              <i class="bi bi-box"></i> Ürünler
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="sales.html">
              <i class="bi bi-cart"></i> Satışlar
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="expenses.html">
              <i class="bi bi-cash"></i> Giderler
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="reports.html">
              <i class="bi bi-bar-chart"></i> Raporlar
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="settings.html">
              <i class="bi bi-gear"></i> Ayarlar
            </a>
          </li>
        </ul>
      </div>
      
      <!-- Main Content -->
      <div class="col-md-10 main-content">
        <div id="cheque-alert-panel"></div>
        <h2 class="mb-4">Finans Yönetim Sistemi</h2>
        <p class="mb-5">Aşağıdaki modüllerden birine tıklayarak ilgili bölüme gidebilirsiniz.</p>

        <div class="row mb-4">
          <div class="col-md-4">
            <a href="upcoming-payments.html" class="dashboard-link position-relative">
              <div class="card module-card border-warning">
                <div class="card-body">
                  <div class="icon text-warning position-relative">
                    <i class="bi bi-calendar-event"></i>
                    <span id="upcoming-count-badge" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" style="display:none;font-size:1rem;">0</span>
                  </div>
                  <h5 class="card-title">Yaklaşan Ödemeler</h5>
                  <p class="card-text">Vadesi yaklaşan çek ödemelerini ve detaylarını görüntüleyin.</p>
                </div>
              </div>
            </a>
          </div>
          <div class="col-md-4">
            <a href="dashboard.html" class="dashboard-link">
              <div class="card module-card">
                <div class="card-body">
                  <div class="icon text-primary"><i class="bi bi-speedometer2"></i></div>
                  <h5 class="card-title">Gösterge Paneli</h5>
                  <p class="card-text">Finansal genel durum özeti ve istatistikleri görüntüleyin.</p>
                </div>
              </div>
            </a>
          </div>
          
          <div class="col-md-4">
            <a href="customers.html" class="dashboard-link">
              <div class="card module-card">
                <div class="card-body">
                  <div class="icon text-success"><i class="bi bi-people"></i></div>
                  <h5 class="card-title">Müşteriler</h5>
                  <p class="card-text">Müşteri bilgilerini ekleyin, düzenleyin ve yönetin.</p>
                </div>
              </div>
            </a>
          </div>
          
          <div class="col-md-4">
            <a href="products.html" class="dashboard-link">
              <div class="card module-card">
                <div class="card-body">
                  <div class="icon text-info"><i class="bi bi-box"></i></div>
                  <h5 class="card-title">Ürünler</h5>
                  <p class="card-text">Ürünleri ve stok durumunu yönetin.</p>
                </div>
              </div>
            </a>
          </div>
          
          <div class="col-md-4">
            <a href="sales.html" class="dashboard-link">
              <div class="card module-card">
                <div class="card-body">
                  <div class="icon text-danger"><i class="bi bi-cart"></i></div>
                  <h5 class="card-title">Satışlar</h5>
                  <p class="card-text">Yeni satış ekleyin ve satış geçmişini görüntüleyin.</p>
                </div>
              </div>
            </a>
          </div>
          
          <div class="col-md-4">
            <a href="expenses.html" class="dashboard-link">
              <div class="card module-card">
                <div class="card-body">
                  <div class="icon text-warning"><i class="bi bi-cash"></i></div>
                  <h5 class="card-title">Giderler</h5>
                  <p class="card-text">Giderlerinizi kategorilere göre ekleyin ve takip edin.</p>
                </div>
              </div>
            </a>
          </div>
          
          <div class="col-md-4">
            <a href="reports.html" class="dashboard-link">
              <div class="card module-card">
                <div class="card-body">
                  <div class="icon text-secondary"><i class="bi bi-bar-chart"></i></div>
                  <h5 class="card-title">Raporlar</h5>
                  <p class="card-text">Finansal raporlar oluşturun ve analiz edin.</p>
                </div>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/js/utils.js"></script>
  <script src="../assets/js/core.js"></script>
  <script>
    // Make the cards clickable
    document.querySelectorAll('.module-card').forEach(card => {
      card.addEventListener('click', () => {
        const link = card.closest('a').getAttribute('href');
        window.location.href = link;
      });
    });

    // Yaklaşan çek ödemeleri paneli ve kart rozeti
    document.addEventListener('DOMContentLoaded', async () => {
      if (!window.api || typeof window.api.getUpcomingCheques !== 'function') return;
      try {
        const cheques = await window.api.getUpcomingCheques(7);
        // Panel
        if (cheques && cheques.length > 0) {
          const panel = document.getElementById('cheque-alert-panel');
          let html = `<div class="alert alert-warning d-flex align-items-center mb-4" style="gap:16px;">
            <i class="bi bi-exclamation-triangle-fill me-2" style="font-size:1.5rem;"></i>
            <div>
              <strong>Yaklaşan Çek Ödemeleri:</strong>
              <ul class="mb-0" style="list-style:none;padding-left:0;">
                ${cheques.map(c => `
                  <li class="mb-1">
                    <span class="fw-bold">${c.customer_name || 'Anonim'}</span> - 
                    <span>${window.Utils.formatDate(c.cheque_date)}</span> - 
                    <span>${window.Utils.formatCurrency(c.total_amount)}</span>
                    <a href="sales.html?saleId=${c.id}" class="btn btn-sm btn-outline-primary ms-2">Satışa Git</a>
                  </li>
                `).join('')}
              </ul>
            </div>
          </div>`;
          panel.innerHTML = html;
        }
        // Kart rozeti
        const badge = document.getElementById('upcoming-count-badge');
        if (badge) {
          if (cheques && cheques.length > 0) {
            badge.textContent = cheques.length;
            badge.style.display = '';
          } else {
            badge.style.display = 'none';
          }
        }
      } catch (err) {
        // Sessizce geç
      }
    });
  </script>
</body>
</html> 